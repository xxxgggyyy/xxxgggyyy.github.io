<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><title>shell基础 &#183; Xgy's Blogs</title>
<meta name=title content="shell基础 &#183; Xgy's Blogs"><meta name=description content="shell脚本基础语法（不全）"><meta name=keywords content="linux,"><link rel=canonical href=https://xxxgggyyy.github.io/posts/linux-basis/shell-basis/><link type=text/css rel=stylesheet href=/css/main.bundle.min.b0d4aeb65335611c810957fcff4af94f45bb796b37facd9be6f7287ee03ce57038918ff5d4ac7a6ea77914fde6d3942c0243d3d17f90926c454b4ea3499e973a.css integrity="sha512-sNSutlM1YRyBCVf8/0r5T0W7eWs3+s2b5vcofuA85XA4kY/11Kx6bqd5FP3m05QsAkPT0X+QkmxFS06jSZ6XOg=="><script type=text/javascript src=/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj+e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.597628986858b13a494c65a74833a8574811213e1948854f9cf3bedab1397e94112500c1f9d89ec839cfc9fd23ecf052499a13b2dcab9a4b36598a478a01899c.js integrity="sha512-WXYomGhYsTpJTGWnSDOoV0gRIT4ZSIVPnPO+2rE5fpQRJQDB+dieyDnPyf0j7PBSSZoTstyrmks2WYpHigGJnA==" data-copy data-copied></script><script src=/js/zoom.min.js></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="shell基础"><meta property="og:description" content="shell脚本基础语法（不全）"><meta property="og:type" content="article"><meta property="og:url" content="https://xxxgggyyy.github.io/posts/linux-basis/shell-basis/"><meta property="og:image" content="https://xxxgggyyy.github.io/posts/linux-basis/shell-basis/feature-shell.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-06-19T15:16:48+08:00"><meta property="article:modified_time" content="2022-06-19T15:16:48+08:00"><meta property="og:see_also" content="https://xxxgggyyy.github.io/posts/linux-basis/unix-introduction/"><meta property="og:see_also" content="https://xxxgggyyy.github.io/posts/linux-basis/unix-file-system-intro/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://xxxgggyyy.github.io/posts/linux-basis/shell-basis/feature-shell.jpg"><meta name=twitter:title content="shell基础"><meta name=twitter:description content="shell脚本基础语法（不全）"><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Blogs","name":"shell基础","headline":"shell基础","abstract":"shell脚本基础语法（不全）","inLanguage":"en","url":"https:\/\/xxxgggyyy.github.io\/posts\/linux-basis\/shell-basis\/","author":{"@type":"Person","name":"xxxgggyyy"},"copyrightYear":"2022","dateCreated":"2022-06-19T15:16:48\u002b08:00","datePublished":"2022-06-19T15:16:48\u002b08:00","dateModified":"2022-06-19T15:16:48\u002b08:00","keywords":["linux"],"mainEntityOfPage":"true","wordCount":"873"}]</script><meta name=author content="xxxgggyyy"><link href=https://github.com/xxxgggyyy rel=me><link href=mailto:xie_guoyi@foxmail.com rel=me><script src=/lib/jquery/jquery.slim.min.js integrity></script><meta name=theme-color></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a></div><div class=min-h-[148px]></div><div class="fixed inset-x-0 pl-[24px] pr-[24px]" style=z-index:100><div id=menu-blur class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl"></div><div class="relative max-w-[64rem] ml-auto mr-auto"><div style=padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3"><div><a href=/ class=flex><span class=sr-only>Xgy&rsquo;s Blogs</span>
<img src=/img/little_cat1.png width=697 height=689 class="logo max-h-[5rem] max-w-[5rem] object-scale-down object-left nozoom" alt="Xgy's Blogs"></a></div><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">Xgy&rsquo;s Blogs</a></nav><nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12"><a href=/posts/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title>Blog</p></a><a href=/series/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title>Series</p></a><a href=/topics/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title>Topics</p></a><a href=/tags/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title>Tags</p></a><a href=https://github.com/xxxgggyyy target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span><p class="text-base font-medium" title></p></a><button id=search-button aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="ltr:mr-14 rtl:ml-14 flex items-center"><button id=appearance-switcher aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></nav><div class="flex md:hidden items-center space-x-5 md:ml-12 h-12"><span></span>
<button id=search-button-mobile aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></button>
<button id=appearance-switcher-mobile aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400" style=margin-right:5px><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div><div class="-my-2 -mr-2 md:hidden"><label id=menu-button for=menu-controller class=block><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper style=padding-top:5px class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=/posts/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>Blog</p></a></li><li class=mt-1><a href=/series/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>Series</p></a></li><li class=mt-1><a href=/topics/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>Topics</p></a></li><li class=mt-1><a href=/tags/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>Tags</p></a></li><li class=mt-1><a href=https://github.com/xxxgggyyy target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><div><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></div><p class="text-bg font-bg" title></p></a></li></ul><hr><ul class="flex mt-4 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li class=mb-1><a href class="flex items-center"><p class="text-sm font-sm text-gray-500 hover:text-gray-900" title>CS Basis</p></a></li><li class=mb-1><a href=/topics/c-family/ class="flex items-center"><p class="text-sm font-sm text-gray-500 hover:text-gray-900" title>C Family</p></a></li></ul></div></label></div></div><div class="main-menu flex pb-3 flex-col items-end justify-between md:justify-start space-x-3" style=margin-top:-15px><div class="hidden md:flex items-center space-x-5"><a href class="flex items-center"><p class="text-xs font-light text-gray-500 hover:text-gray-900" title>CS Basis</p></a><a href=/topics/c-family/ class="flex items-center"><p class="text-xs font-light text-gray-500 hover:text-gray-900" title>C Family</p></a></div></div><script>(function(){var e=$(".main-menu"),t=window.location.pathname;e.find('a[href="'+t+'"]').each(function(e,t){$(t).children("p").addClass("active")})})()</script></div></div><script>window.addEventListener("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,n=document.getElementById("menu-blur");n.style.opacity=t/300})</script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header id=single_header class="mt-5 max-w-prose"><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">shell基础</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2022-06-19 15:16:48 +0800 +0800">19 June 2022</time><span class="px-2 text-primary-500">&#183;</span><span>873 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">5 mins</span><span class="px-2 text-primary-500">&#183;</span>
<script type=text/javascript src=/js/zen-mode.min.16f2e42a0014d476212e14c056b26b69bc85cb5de15352a5e3a1a0be498055dc1bf0926cef44baef1cc7fa2dfc5de0052892645cd3766598065f47b15c4bd44d.js integrity="sha512-FvLkKgAU1HYhLhTAVrJrabyFy13hU1Kl46GgvkmAVdwb8JJs70S67xzH+i38XeAFKJJkXNN2ZZgGX0exXEvUTQ=="></script><span class=mb-[2px]><span id=zen-mode-button class="text-lg hover:text-primary-500" title="Enable zen mode" data-title-i18n-disable="Enable zen mode" data-title-i18n-enable="Disable zen mode"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="50" height="50"><path fill="currentcolor" d="M12.980469 4C9.1204688 4 5.9804688 7.14 5.9804688 11L6 26H9.9804688V11c0-1.65 1.3400002-3 3.0000002-3H40.019531c1.66.0 3 1.35 3 3V39c0 1.65-1.34 3-3 3H29c0 1.54-.579062 2.94-1.539062 4H40.019531c3.86.0 7-3.14 7-7V11c0-3.86-3.14-7-7-7H12.980469zM7 28c-2.206.0-4 1.794-4 4V42c0 2.206 1.794 4 4 4H23c2.206.0 4-1.794 4-4V32c0-2.206-1.794-4-4-4H7zm0 4H23L23.001953 42H7V32z"/></svg></span></span></span></span></div><div class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/linux/","_self")'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Linux
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='window.open("/topics/linux-basis/","_self")'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Linux Basis</span></span></span></div></div><div class="flex author"><img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width=96 height=96 alt=xxxgggyyy src=/img/little_cat2_hue9517b3b0042cf4786c2fe7711a7cd24_1977661_192x192_fill_q75_box_center.jpg><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">xxxgggyyy</div><div class="text-sm text-neutral-700 dark:text-neutral-400">May be a tech geek?</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/xxxgggyyy target=_blank aria-label=Github rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=mailto:xie_guoyi@foxmail.com target=_blank aria-label=Email rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg></span></span></a></div></div></div></div><div class=mb-5></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-[140px]"><details open class="toc-right mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#shell简介>shell简介</a></li><li><a href=#shell基础>Shell基础</a><ul><li><a href=#-shell命令基本格式>|| Shell命令基本格式</a></li><li><a href=#-io重定向>|| I/O重定向</a></li><li><a href=#-shell变量>|| Shell变量</a><ul><li><a href=#变量替换>变量替换</a></li><li><a href=#常见标准变量>常见标准变量</a></li><li><a href=#ps1变量支持的特殊字符>PS1变量支持的特殊字符</a></li></ul></li><li><a href=#-元字符>|| 元字符</a><ul><li><a href=#文件名替换>文件名替换</a></li><li><a href=#管道>管道</a></li><li><a href=#执行命令命令替换>执行命令（命令替换）</a></li><li><a href=#后台执行>后台执行</a></li><li><a href=#命令序列>命令序列</a></li><li><a href=#命令编组>命令编组</a></li><li><a href=#元字符转义>元字符转义</a></li></ul></li><li><a href=#-特殊字符>|| 特殊字符</a></li><li><a href=#-shell选项>|| Shell选项</a></li><li><a href=#-shell别名>|| Shell别名</a></li><li><a href=#-shell历史命令>|| Shell历史命令</a></li><li><a href=#-shell配置文件>|| Shell配置文件</a></li></ul></li><li><a href=#shell编程>Shell编程</a><ul><li><a href=#-执行脚本>|| 执行脚本</a></li><li><a href=#-shell编程基础>|| shell编程基础</a><ul><li><a href=#注释>注释</a></li><li><a href=#变量>变量</a></li><li><a href=#获取命令行参数>获取命令行参数</a></li><li><a href=#获取输入>获取输入</a></li><li><a href=#简单函数>简单函数</a></li></ul></li><li><a href=#-条件与测试>|| 条件与测试</a><ul><li><a href=#条件结构>条件结构</a></li><li><a href=#测试指令>测试指令</a></li></ul></li><li><a href=#-算数运算>|| 算数运算</a><ul><li><a href=#expr>expr</a></li><li><a href=#let>let</a></li></ul></li><li><a href=#-循环结构>|| 循环结构</a><ul><li><a href=#for-in-do-done>for-in-do-done</a></li><li><a href=#while-do-done>while-do-done</a></li><li><a href=#util-do-done>util-do-done</a></li></ul></li><li><a href=#-多路分支结构case>|| 多路分支结构case</a></li><li><a href=#-捕获内核信号>|| 捕获内核信号</a></li><li><a href=#-调试shell程序>|| 调试shell程序</a></li></ul></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#shell简介>shell简介</a></li><li><a href=#shell基础>Shell基础</a><ul><li><a href=#-shell命令基本格式>|| Shell命令基本格式</a></li><li><a href=#-io重定向>|| I/O重定向</a></li><li><a href=#-shell变量>|| Shell变量</a><ul><li><a href=#变量替换>变量替换</a></li><li><a href=#常见标准变量>常见标准变量</a></li><li><a href=#ps1变量支持的特殊字符>PS1变量支持的特殊字符</a></li></ul></li><li><a href=#-元字符>|| 元字符</a><ul><li><a href=#文件名替换>文件名替换</a></li><li><a href=#管道>管道</a></li><li><a href=#执行命令命令替换>执行命令（命令替换）</a></li><li><a href=#后台执行>后台执行</a></li><li><a href=#命令序列>命令序列</a></li><li><a href=#命令编组>命令编组</a></li><li><a href=#元字符转义>元字符转义</a></li></ul></li><li><a href=#-特殊字符>|| 特殊字符</a></li><li><a href=#-shell选项>|| Shell选项</a></li><li><a href=#-shell别名>|| Shell别名</a></li><li><a href=#-shell历史命令>|| Shell历史命令</a></li><li><a href=#-shell配置文件>|| Shell配置文件</a></li></ul></li><li><a href=#shell编程>Shell编程</a><ul><li><a href=#-执行脚本>|| 执行脚本</a></li><li><a href=#-shell编程基础>|| shell编程基础</a><ul><li><a href=#注释>注释</a></li><li><a href=#变量>变量</a></li><li><a href=#获取命令行参数>获取命令行参数</a></li><li><a href=#获取输入>获取输入</a></li><li><a href=#简单函数>简单函数</a></li></ul></li><li><a href=#-条件与测试>|| 条件与测试</a><ul><li><a href=#条件结构>条件结构</a></li><li><a href=#测试指令>测试指令</a></li></ul></li><li><a href=#-算数运算>|| 算数运算</a><ul><li><a href=#expr>expr</a></li><li><a href=#let>let</a></li></ul></li><li><a href=#-循环结构>|| 循环结构</a><ul><li><a href=#for-in-do-done>for-in-do-done</a></li><li><a href=#while-do-done>while-do-done</a></li><li><a href=#util-do-done>util-do-done</a></li></ul></li><li><a href=#-多路分支结构case>|| 多路分支结构case</a></li><li><a href=#-捕获内核信号>|| 捕获内核信号</a></li><li><a href=#-调试shell程序>|| 调试shell程序</a></li></ul></li></ul></nav></div></details><script>(function(){var t,e=$("#TableOfContents");if(e.length>0){t=$(window);function n(){var s,o=t.scrollTop(),i=$(".anchor"),n="";if(i.each(function(e,t){t=$(t),t.offset().top-$(window).height()/3<=o&&(n=t.attr("id"))}),s=e.find("a.active"),s.length==1&&s.eq(0).attr("href")=="#"+n)return!0;s.each(function(e,t){$(t).removeClass("active")}),e.find('a[href="#'+n+'"]').addClass("active"),e.find('a[href="#'+n+'"]').parentsUntil("#TableOfContents").each(function(e,t){$(t).children("a").parents("ul").show()})}t.on("scroll",n),$(document).ready(function(){n()})}})()</script></div></div><div class="min-w-0 min-h-0 max-w-fit"><details style=margin-left:0 class="mt-2 mb-5 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5"><summary class="py-1 text-lg font-semibold cursor-pointer bg-primary-200 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-primary-800 dark:text-neutral-100">unix-unbounded - This article is part of a series.</summary><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><a href=https://xxxgggyyy.github.io/posts/linux-basis/unix-introduction/>Part 1: UINIX简介与入门</a></div><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><a href=https://xxxgggyyy.github.io/posts/linux-basis/unix-file-system-intro/>Part 2: UNIX文件系统操作</a></div><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">Part 3: This Article</div></details><div class="article-content max-w-prose mb-20"><h1 class="relative group">shell简介<div id=shell%E7%AE%80%E4%BB%8B class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#shell%E7%AE%80%E4%BB%8B aria-label=Anchor>#</a></span></h1><p>shell是unix/linux中最常用的用户接口程序，通过命令行的方式提供给用户访问和修改系统的能力。
shell属于用户态程序，不具有任何特权，甚至可以自己编写一个&rsquo;shell&rsquo;程序。</p><blockquote><p>常见的shell</p><ol><li>Bourne Shell（sh），这是多数UNIX中的标准和默认shell</li><li>Korn Shell（ksh），这是sh的超集</li><li>C Shell（csh），具有c语言风格的shell，完全不同于sh和ksh。属于BSD UNIX的一部分</li><li>Bourne Again Shell（bash），bash是基于sh实现的，通常是linux的标准和默认shell</li></ol></blockquote><h1 class="relative group">Shell基础<div id=shell%E5%9F%BA%E7%A1%80 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#shell%E5%9F%BA%E7%A1%80 aria-label=Anchor>#</a></span></h1><p>shell是一个标准的c/c++程序，一般位于<code>/bin</code>或者<code>/usr/bin</code>下。用户登录后，自动启动shell。</p><blockquote><p>shell的基本功能（特征）</p><ul><li>命令执行</li><li>文件名替换</li><li>I/O重定向</li><li>管道</li><li>环境控制</li><li>后台处理</li><li>shell脚本</li></ul></blockquote><h2 class="relative group">|| Shell命令基本格式<div id=-shell%E5%91%BD%E4%BB%A4%E5%9F%BA%E6%9C%AC%E6%A0%BC%E5%BC%8F class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-shell%E5%91%BD%E4%BB%A4%E5%9F%BA%E6%9C%AC%E6%A0%BC%E5%BC%8F aria-label=Anchor>#</a></span></h2><pre tabindex=0><code>$ cmd [-opts] [args]
</code></pre><p>shell会忽略多余的不可见字符。
shell中的命令实际有两种，shell的内部命令和可执行文件。可通过<code>type cmd</code>命令查看cmd命令是内建命令还是可执行文件。</p><blockquote><p><code>[]</code>表示可选
UNIX中区分大小写，且只接受小写的<code>cmd</code></p></blockquote><h2 class="relative group">|| I/O重定向<div id=-io%E9%87%8D%E5%AE%9A%E5%90%91 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-io%E9%87%8D%E5%AE%9A%E5%90%91 aria-label=Anchor>#</a></span></h2><p>在命令的最后使用<code>&lt;</code>、<code>&lt;&lt;</code>、<code>></code>、<code>>></code>可实现将标准输出（<code>> file_name</code>）重定向到文件，将文件重定向到标准输入（<code>&lt; file_name</code>)</p><blockquote><p><code>></code>表示输出覆盖，<code>>></code>表示追加
<code>&lt;&lt; str</code>表示仍然从标准输入读取数据，但当读取到str时结束
重定向的功能非常强大，因为很多程序都提供了从标准输入读取参数数据和将结果输出到标准输出的功能，比如cat、tail、head等等</p></blockquote><p>在linux中一切的设备其实都是特殊的文件，对于标准输入设备（键盘）和标准输出设备（显示器）也是同理。所以其实标准输入和输出都是打开的文件，通过文件描述符表示。</p><table><thead><tr><th style=text-align:center>描述符</th><th style=text-align:center>文件</th><th style=text-align:center>设备</th></tr></thead><tbody><tr><td style=text-align:center>0</td><td style=text-align:center>stdin</td><td style=text-align:center>键盘</td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>stdout</td><td style=text-align:center>显示器</td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>stderr</td><td style=text-align:center>显示器</td></tr></tbody></table><p>所以上面直接使用<code>&lt;</code>，<code>></code>其实是对<code>0&lt;</code>，<code>1></code>的缩写。</p><blockquote><p>stderr和stdout是分开的，<code>></code>只会重定向stdout，stderr仍显示在屏幕上不会定向到文件。
可以使用<code>2>&amp;1</code>将stderr也定向到stdout，然后再使用<code>></code>即可把stderr也定向到文件。因为<code>2>1</code>表示将stderr定向到文件1，所以必须要添加一个<code>&</code></p></blockquote><h2 class="relative group">|| Shell变量<div id=-shell%E5%8F%98%E9%87%8F class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-shell%E5%8F%98%E9%87%8F aria-label=Anchor>#</a></span></h2><p>shell变量可分为shell标准变量和用户定义变量（局部变量）。标准变量拥有系统可知的名称，用来控制用户的环境信息，所以也叫环境变量（环境变量有一点歧义，统一成为标准变量）。
<code>set</code>命令可列出当前的所有变量，<code>unset</code>命令可删除不需要的变量。
用户可使用<code>var_name=value</code>定义变量，在需要使用变量时，可使用<code>$var_name</code>。
不管给出的value是字符还是数字，<strong>都会被看作是字符串</strong>。</p><blockquote><p>变量定义时，等号两边不能有空格。</p></blockquote><p>使用<code>export var_name</code>可导出变量，此时在所有的子shell进程（多重子shell）中都能访问到该变量。
<code>export</code>命令列出当前的所有导出变量。</p><h3 class="relative group">变量替换<div id=%E5%8F%98%E9%87%8F%E6%9B%BF%E6%8D%A2 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%E5%8F%98%E9%87%8F%E6%9B%BF%E6%8D%A2 aria-label=Anchor>#</a></span></h3><table><thead><tr><th style=text-align:center>变量选项</th><th style=text-align:left>含义</th></tr></thead><tbody><tr><td style=text-align:center>$var</td><td style=text-align:left>变量的值</td></tr><tr><td style=text-align:center>${var}</td><td style=text-align:left>变量的值。在字符串中使用时，{}可区分出变量名</td></tr><tr><td style=text-align:center>${var:-str}</td><td style=text-align:left>变量不空为变量值，空为str</td></tr><tr><td style=text-align:center>${var:+str}</td><td style=text-align:left>和-str相反，var不空为str，空为空</td></tr><tr><td style=text-align:center>${var:=str}</td><td style=text-align:left>和-str类似，var空为str，但会将var设为str</td></tr><tr><td style=text-align:center>${var:?str}</td><td style=text-align:left>和-str类似，var空为str，但会直接退出</td></tr></tbody></table><h3 class="relative group">常见标准变量<div id=%E5%B8%B8%E8%A7%81%E6%A0%87%E5%87%86%E5%8F%98%E9%87%8F class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%E5%B8%B8%E8%A7%81%E6%A0%87%E5%87%86%E5%8F%98%E9%87%8F aria-label=Anchor>#</a></span></h3><table><thead><tr><th style=text-align:center>变量名</th><th style=text-align:left>含义</th></tr></thead><tbody><tr><td style=text-align:center>HOME</td><td style=text-align:left>用户主目录，多个命令均使用该变量定位主目录，如无参cd进入主目录</td></tr><tr><td style=text-align:center>IFS</td><td style=text-align:left>内部域分隔符，解释为命令行元素分隔符。（bash中实测无效IFS=":&ldquo;无效，倒是read的确使用IFS分割）</td></tr><tr><td style=text-align:center>PATH</td><td style=text-align:left>shell查找命令（可执行文件）的目录以<code>:</code>分隔。如<code>PATH=:/bin:/</code>，首字符<code>:</code>表示<code>.:</code>当前目录</td></tr><tr><td style=text-align:center>PS1</td><td style=text-align:left>命令提示符1，sh中为<code>$</code>。PS1支持特殊字符自动替换，如<code>\u</code>替换为用户名，<code>\t</code>为当前时间等。</td></tr><tr><td style=text-align:center>PS2</td><td style=text-align:left>未输入完整命令按下Enter后的提示符，默认未<code>></code></td></tr><tr><td style=text-align:center>CDPATH</td><td style=text-align:left>cd查找参数的目录，一般未定义CDPATH则在当前目录找</td></tr><tr><td style=text-align:center>PWD</td><td style=text-align:left>当前工作目录</td></tr><tr><td style=text-align:center>SEHLL</td><td style=text-align:left>当前shell可执行文件的位置</td></tr><tr><td style=text-align:center>TERM</td><td style=text-align:left>终端类型</td></tr><tr><td style=text-align:center>TZ</td><td style=text-align:left>用户时区</td></tr><tr><td style=text-align:center>HISTSIZE</td><td style=text-align:left>历史命令最大数量</td></tr><tr><td style=text-align:center>TMOUT</td><td style=text-align:left>用户不输入命令时，超过该时间则自动退出该用户</td></tr><tr><td style=text-align:center>VISUAL</td><td style=text-align:left>某些命令使用的编辑器</td></tr><tr><td style=text-align:center>EDITOR</td><td style=text-align:left>类似VISUAL，某些命令使用其指定的编辑器</td></tr></tbody></table><h3 class="relative group">PS1变量支持的特殊字符<div id=ps1%E5%8F%98%E9%87%8F%E6%94%AF%E6%8C%81%E7%9A%84%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#ps1%E5%8F%98%E9%87%8F%E6%94%AF%E6%8C%81%E7%9A%84%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6 aria-label=Anchor>#</a></span></h3><table><thead><tr><th style=text-align:center>字符</th><th style=text-align:left>含义</th></tr></thead><tbody><tr><td style=text-align:center>\!</td><td style=text-align:left>命令序号</td></tr><tr><td style=text-align:center>\$</td><td style=text-align:left>根目录显示#，非根显示$</td></tr><tr><td style=text-align:center>\d</td><td style=text-align:left>当前日期</td></tr><tr><td style=text-align:center>\s</td><td style=text-align:left>当前shell名称</td></tr><tr><td style=text-align:center>\t</td><td style=text-align:left>当前时间</td></tr><tr><td style=text-align:center>\u</td><td style=text-align:left>当前用户名</td></tr><tr><td style=text-align:center>\h</td><td style=text-align:left>主机名</td></tr><tr><td style=text-align:center>\W</td><td style=text-align:left>当前目录</td></tr></tbody></table><h2 class="relative group">|| 元字符<div id=-%E5%85%83%E5%AD%97%E7%AC%A6 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-%E5%85%83%E5%AD%97%E7%AC%A6 aria-label=Anchor>#</a></span></h2><p>元字符既对shell有特殊含义的字符，可以用来实现文件名替换、管道、后台执行、变量引用、命令替换、命令序列等功能。</p><h3 class="relative group">文件名替换<div id=%E6%96%87%E4%BB%B6%E5%90%8D%E6%9B%BF%E6%8D%A2 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%E6%96%87%E4%BB%B6%E5%90%8D%E6%9B%BF%E6%8D%A2 aria-label=Anchor>#</a></span></h3><p>通过在命令的参数上使用<code>*</code>，<code>?</code>，<code>[]</code>，shell会根据输入参数和元字符自动匹配目录下的文件，并在执行该命令时将参数展开为所有匹配到的文件序列（以空格隔开）。</p><table><thead><tr><th style=text-align:center>字符</th><th style=text-align:left>功能</th></tr></thead><tbody><tr><td style=text-align:center>?</td><td style=text-align:left>匹配任意单个字符</td></tr><tr><td style=text-align:center>*</td><td style=text-align:left>匹配任意个字符，可以为0个</td></tr><tr><td style=text-align:center>[list]</td><td style=text-align:left>匹配list中任意一个字符，其中list可以采用范围表示如：5-9，a-z等</td></tr><tr><td style=text-align:center>[!list]</td><td style=text-align:left>匹配不在list中的任意一个字符</td></tr></tbody></table><blockquote><p>类似正则表达式
不只匹配当前目录，可以给定其他目录的任意字面量前缀如<code>/root/*</code></p></blockquote><h3 class="relative group">管道<div id=%E7%AE%A1%E9%81%93 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%E7%AE%A1%E9%81%93 aria-label=Anchor>#</a></span></h3><p><code>cmdA|cmdB</code>通过<code>|</code>将cmdA的标准输出连接到cmdB的标准输入。
管道自身其实也是一个特殊的文件。</p><h3 class="relative group">执行命令（命令替换）<div id=%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%E5%91%BD%E4%BB%A4%E6%9B%BF%E6%8D%A2 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%E5%91%BD%E4%BB%A4%E6%9B%BF%E6%8D%A2 aria-label=Anchor>#</a></span></h3><p>在命令前后使用重音符号（反引号）<code>`</code>可以执行包裹的命令，并将命令的标准输出插入到命令所处的位置。如<code>ucount=<code>who|wc -l</code></code>，ucount将包含当前登录的终端数量。</p><blockquote><p>bash中<code>$(cmd)</code>同重音符号含义一致</p></blockquote><h3 class="relative group">后台执行<div id=%E5%90%8E%E5%8F%B0%E6%89%A7%E8%A1%8C class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%E5%90%8E%E5%8F%B0%E6%89%A7%E8%A1%8C aria-label=Anchor>#</a></span></h3><p>在命令末尾添加<code>&</code>，命令将会被shell放在后台执行。也就是说shell会立即返回，重新开始命令提示符。后台执行的程序一般需要重定向输出，以免是屏幕显示混乱。
另外，一般当用户退出系统时，其后台进程也会被中止。可以使用<code>nohup</code>程序执行后台命令，此时将会忽略终端关闭时发出的SIGHUP信号。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>nohup <span class=o>(</span>sleep 10<span class=p>;</span><span class=nb>echo</span> ok<span class=o>)</span> &gt; nohup.out <span class=p>&amp;</span>
</span></span></code></pre></div><p>如果此时没有执行重定向的文件，则默认定向到nohup.out，毕竟此时连终端都没有了。</p><blockquote><p>bash中nohup程序并不支持命令序列和命令编组
可以将多条命令写成脚本后执行，<code>nohup sh sh_script &</code></p></blockquote><h3 class="relative group">命令序列<div id=%E5%91%BD%E4%BB%A4%E5%BA%8F%E5%88%97 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%E5%91%BD%E4%BB%A4%E5%BA%8F%E5%88%97 aria-label=Anchor>#</a></span></h3><p>通过<code>;</code>在一行将多个命令隔开，shell会按照顺序从左至右依次执行这些命令。</p><h3 class="relative group">命令编组<div id=%E5%91%BD%E4%BB%A4%E7%BC%96%E7%BB%84 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%E5%91%BD%E4%BB%A4%E7%BC%96%E7%BB%84 aria-label=Anchor>#</a></span></h3><p>将用<code>;</code>隔开的多条命令用<code>()</code>包裹，可以表现为单条命令，方便多条命令的同时后台执行和重定向。
<code>sleep 10; echo ok&</code>表示的是在前台执行完sleep后再在后台执行echo
<code>(sleep 10; echo ok)&</code>表示将整个命令序列都放在后台执行。</p><h3 class="relative group">元字符转义<div id=%E5%85%83%E5%AD%97%E7%AC%A6%E8%BD%AC%E4%B9%89 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%E5%85%83%E5%AD%97%E7%AC%A6%E8%BD%AC%E4%B9%89 aria-label=Anchor>#</a></span></h3><p>可以通过<code>"</code>、<code>'</code>、<code>\</code> 对元字符进行转义
<code>"str"</code>，str中除<code>"</code>、<code>$</code>、<code>`</code>外，其他字符均按照字面字符解释
<code>'str'</code>，str中除<code>'</code>外，其他字符均按字符字面含义解释
<code>\</code> 后的任意字符按该字符字面意思解释</p><blockquote><p><code>$' \t\n'</code>在单引号字符串前添加<code>$</code>表示将字符串立即转义，既<code>\t</code>转为制表符对应的编码而不是两个字符<code>\</code>和<code>t</code></p></blockquote><h2 class="relative group">|| 特殊字符<div id=-%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6 aria-label=Anchor>#</a></span></h2><p>UNIX支持多种终端，每种终端有自己的功能和特性，有一组特殊的字符代表了这些功能。只需要将这些字符打印到标准输出中（echo或tput）即可控制终端执行该功能。
如字符<code>\032</code>在vt100终端中表示清屏</p><blockquote><p><code>\0</code>开头表示8进制的字符编码</p></blockquote><p>系统支持的每一类终端都在终端数据库terminfo中，其是一个文本文件，包含了每个终端对应的功能列表。
任何包含terminfo数据库的系统，都包含一个<code>tput</code>实用程序。 通过<code>tput</code>可以直接打印出某个功能值，<code>tput</code>根据<code>TERM</code>标准变量得知当前终端类型，在结合terminfo即可得知某个功能的值并打印。</p><blockquote><p>如<code>tput clear</code>可以在任意终端下清屏，而不用管该终端下的具体字符值是多少。
关于终端、控制台、GUI、X11等概念见<a href=https://blog.csdn.net/ZCShouCSDN/article/details/120974554 target=_blank>
blog</a></p></blockquote><p><strong>终端功能的简单列表</strong></p><table><thead><tr><th style=text-align:center>参数</th><th style=text-align:left>功能</th></tr></thead><tbody><tr><td style=text-align:center>bel</td><td style=text-align:left>响铃</td></tr><tr><td style=text-align:center>blink</td><td style=text-align:left>闪烁显示</td></tr><tr><td style=text-align:center>bold</td><td style=text-align:left>粗体显示</td></tr><tr><td style=text-align:center>clear</td><td style=text-align:left>清屏</td></tr><tr><td style=text-align:center>cup r c</td><td style=text-align:left>移动光标到r行c列</td></tr><tr><td style=text-align:center>dim</td><td style=text-align:left>显示变暗</td></tr><tr><td style=text-align:center>ed</td><td style=text-align:left>从光标位置擦除到底部</td></tr><tr><td style=text-align:center>el</td><td style=text-align:left>从光标位置擦除到行尾</td></tr><tr><td style=text-align:center>smso</td><td style=text-align:left>启动凸显</td></tr><tr><td style=text-align:center>rmso</td><td style=text-align:left>关闭凸显</td></tr><tr><td style=text-align:center>smul</td><td style=text-align:left>启动下划线</td></tr><tr><td style=text-align:center>rmul</td><td style=text-align:left>关闭下划线</td></tr><tr><td style=text-align:center>rev</td><td style=text-align:left>反色显示</td></tr><tr><td style=text-align:center>sgr 0</td><td style=text-align:left>关闭所有属性，这是<code>tput blink</code>后关闭闪烁的唯一方式</td></tr></tbody></table><blockquote><p>还可以使用<code>stty</code>程序调整终端参数
<code>stty -echo</code>关闭输入回显（<code>stty echo</code>打开）
<code>stty eof \^D</code>[Ctrl+D]输入eof
<code>stty sane</code>恢复默认设置</p></blockquote><h2 class="relative group">|| Shell选项<div id=-shell%E9%80%89%E9%A1%B9 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-shell%E9%80%89%E9%A1%B9 aria-label=Anchor>#</a></span></h2><p>bash和ksh等shell提供很多的选项。要打开某个选项执行<code>set -o opt</code>，关闭某个选项<code>set +o opt</code>
如：
<code>set -o noclobber</code>禁止用户在重定向时覆盖某个已存在的文件
<code>set -o ignoreeof</code>防止[Ctrl+d]退出当前的登录的shell，[Ctrl+d]本身就表示输入eof
<code>set -o vi</code>在交互式shell中命令行编辑采用vi风格</p><blockquote><p>此时<code>j</code>、<code>k</code>用来切换历史命令
<code>v</code>进入<code>VISUAL</code>或<code>EDITOR</code>定义的编辑器编辑命令行</p></blockquote><h2 class="relative group">|| Shell别名<div id=-shell%E5%88%AB%E5%90%8D class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-shell%E5%88%AB%E5%90%8D aria-label=Anchor>#</a></span></h2><p><code>alias new_name=cmd</code>命令定义命令的别名。</p><blockquote><p><code>alias</code>命令仅在交互式shell中可用
<code>alias</code>命令列出所有的别名</p></blockquote><p><strong>常用alias</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>ls</span><span class=o>=</span><span class=s2>&#34;ls --color=auto&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>echo</span><span class=o>=</span><span class=s2>&#34;echo -e&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>ll</span><span class=o>=</span><span class=s2>&#34;ls -l&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>r</span><span class=o>=</span><span class=s2>&#34;fc -s&#34;</span> <span class=c1># 历史命令</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>rm</span><span class=o>=</span>trash  <span class=c1># 避免误删</span>
</span></span><span class=line><span class=cl>trash<span class=o>(){</span>
</span></span><span class=line><span class=cl>    mv <span class=nv>$@</span> <span class=nv>$HOME</span>/.trash/
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 class="relative group">|| Shell历史命令<div id=-shell%E5%8E%86%E5%8F%B2%E5%91%BD%E4%BB%A4 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-shell%E5%8E%86%E5%8F%B2%E5%91%BD%E4%BB%A4 aria-label=Anchor>#</a></span></h2><p>shell会把使用过的命令保存到一个文件中，bash默认保存在主目录的<code>.bash_history</code>中，环境变量<code>HISTSIZE</code>和<code>HISTFILE</code>控制保存的命令数量和文件。</p><p><code>history</code>命令查看历史命令列表</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>history</span> <span class=m>10</span> <span class=c1># 列出最近的10条命令</span>
</span></span></code></pre></div><p><code>fc</code>命令可用于列出、编辑、重复执行历史命令</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>fc</span> -l <span class=c1># 同history</span>
</span></span><span class=line><span class=cl><span class=nb>fc</span> -e vim <span class=m>225</span> <span class=c1># 先使用vim重新编辑序号为225的命令然后执行</span>
</span></span><span class=line><span class=cl><span class=nb>fc</span> -s <span class=c1># 执行最近一条命令</span>
</span></span><span class=line><span class=cl><span class=nb>fc</span> -s <span class=m>225</span> <span class=c1># 执行225号命令</span>
</span></span><span class=line><span class=cl><span class=nb>fc</span> -s vim <span class=c1># 执行最近的以vim开头的一条指令</span>
</span></span></code></pre></div><h2 class="relative group">|| Shell配置文件<div id=-shell%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-shell%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6 aria-label=Anchor>#</a></span></h2><p>sh、ksh、bash中均有两类配置文件，系统配置文件（全局配置）和用户配置文件。
每次启动shell时都会读取系统配置文件，之后再读取当前登录用户主目录下的用户配置文件。</p><blockquote><p>bash的配置文件读取顺序如下：</p><ul><li>交互式登录时，如直接通过终端输入账号和密码，或使用su - user_name或su -l user_name登录。此时的读取顺序<code>/etc/profile-->/etc/profile.d/*.sh-->~.bash_profile-->~/.bashrc-->/etc/bashrc</code></li><li>非交互式登录时，如使用su USERNAME或图形界面下打开的终端。此时的读取顺序为<code>~.bashrc-->/etc/bashrc-->/etc/profile.d/*.sh</code></li></ul></blockquote><h1 class="relative group">Shell编程<div id=shell%E7%BC%96%E7%A8%8B class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#shell%E7%BC%96%E7%A8%8B aria-label=Anchor>#</a></span></h1><p>UNIX shell提供一种解释型的命令语言，包含了许多计算机编程语言的一般特性，如顺序、循环、选择等结构。shell的程序文件一般称为shell脚本。</p><h2 class="relative group">|| 执行脚本<div id=-%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC aria-label=Anchor>#</a></span></h2><ol><li><p>使用<code>sh script_name</code>命令执行</p></li><li><p>将shell脚本设为可执行，然后直接使用文件名执行即可</p><blockquote><p>chmod +x script_name
详见UNIX文件系统操作</p></blockquote></li><li><p><code>. script_name</code>命令执行</p><blockquote><p>使用1和2的方式执行，shell都会产生一个shell子进程用于执行脚本
使用3<code>.</code>执行，则直接使用当前的shell执行，不会产生子进程</p></blockquote></li></ol><h2 class="relative group">|| shell编程基础<div id=-shell%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-shell%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80 aria-label=Anchor>#</a></span></h2><h3 class="relative group">注释<div id=%E6%B3%A8%E9%87%8A class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%E6%B3%A8%E9%87%8A aria-label=Anchor>#</a></span></h3><p>shell中使用<code>#</code>作为注释开始，之后到行尾都会认为是注释</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># program 3</span>
</span></span><span class=line><span class=cl>date <span class=c1># comment</span>
</span></span></code></pre></div><p>可以将<code>#!</code>开头的<strong>特殊注释</strong>放在脚本第一行，指定执行脚本的shell</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nb>echo</span> <span class=s2>&#34;using bash&#34;</span>
</span></span></code></pre></div><blockquote><p>只有在shell脚本作为可执行文件执行直接执行时，才会根据<code>#!</code>选择执行的shell</p></blockquote><h3 class="relative group">变量<div id=%E5%8F%98%E9%87%8F class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%E5%8F%98%E9%87%8F aria-label=Anchor>#</a></span></h3><p>参见上文**|| Shell变量**节</p><blockquote><p>可以使用变量保存命令输出
<code>var1=`date`</code>
<code>var2=`tput clear`</code>
<code>s_bold=`tput smso`</code>
<code>e_bold=`tput rmso`</code></p></blockquote><h3 class="relative group">获取命令行参数<div id=%E8%8E%B7%E5%8F%96%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%E8%8E%B7%E5%8F%96%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0 aria-label=Anchor>#</a></span></h3><p>shell中通过特殊变量获取，shell脚本执行时的命令行参数</p><table><thead><tr><th style=text-align:center>变量名</th><th style=text-align:left>含义</th></tr></thead><tbody><tr><td style=text-align:center>$0</td><td style=text-align:left>脚本名，与命令行输入脚本一致</td></tr><tr><td style=text-align:center>$1,$2&mldr;$9</td><td style=text-align:left>第1到第9个参数，9个以上的参数将被忽略只能使用$@或$*获取</td></tr><tr><td style=text-align:center>$#</td><td style=text-align:left>参数个数</td></tr><tr><td style=text-align:center>$@</td><td style=text-align:left>包含所有的1-9个参数</td></tr><tr><td style=text-align:center>$*</td><td style=text-align:left>包含所有的1-9个参数</td></tr><tr><td style=text-align:center>$?</td><td style=text-align:left>上一次命令执行的返回值（结果）</td></tr><tr><td style=text-align:center>$$</td><td style=text-align:left>执行脚本进程的PID</td></tr></tbody></table><p>如果要对位置变量<code>$1-$9</code>赋值可以使用<code>set One Two Three</code>，对其依次赋值</p><blockquote><p><code>exit n</code>表示退出当前shell，其中n就是返回值
shell脚本的返回值是最后一条执行指令的返回值，故如果最后为<code>exit n</code>则可指定脚本返回值。</p></blockquote><p><code>$@</code>与<code>$*</code>区别在于用双引号括起来时的表现。不括起来含义相同。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=k>for</span> arg in <span class=s2>&#34;</span><span class=nv>$@</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=nv>$arg</span>  <span class=c1># 将会依次打印每个参数</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> arg in <span class=s2>&#34;</span><span class=nv>$*</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=nv>$arg</span> <span class=c1># 循环只执行一次，一次打印全部参数</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></div><h3 class="relative group">获取输入<div id=%E8%8E%B7%E5%8F%96%E8%BE%93%E5%85%A5 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%E8%8E%B7%E5%8F%96%E8%BE%93%E5%85%A5 aria-label=Anchor>#</a></span></h3><p>使用<code>read</code>指令从输入设备中读取一行。第一个单词赋给第一个变量，第二个单词赋给第二个，如果给出的变量数量不够，则多余的全部赋给最后一个变量，如下。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=nb>read</span> one two rest
</span></span><span class=line><span class=cl><span class=c1># 假设输入为 1 2 3 4 5</span>
</span></span><span class=line><span class=cl><span class=c1># 则$one=1 $two=2 $rest=3 4 5</span>
</span></span><span class=line><span class=cl><span class=c1># read自动创建参数同名的变量</span>
</span></span></code></pre></div><blockquote><p><code>IFS</code>变量影响<code>read</code>对单词的划分
即若<code>IFS=:</code>，则输入可为<code>1:2:3:4</code></p></blockquote><h3 class="relative group">简单函数<div id=%E7%AE%80%E5%8D%95%E5%87%BD%E6%95%B0 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%E7%AE%80%E5%8D%95%E5%87%BD%E6%95%B0 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># 定义</span>
</span></span><span class=line><span class=cl><span class=o>[</span> <span class=k>function</span> <span class=o>]</span> funname <span class=o>[()]</span>
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>    action<span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=o>[</span><span class=k>return</span> int<span class=p>;</span><span class=o>]</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 像普通命令一样使用</span>
</span></span><span class=line><span class=cl>funname <span class=m>1</span> <span class=m>2</span> <span class=m>3</span> <span class=m>4</span> <span class=m>5</span>
</span></span></code></pre></div><p><code>retrun</code>可返回0-255作为函数的返回值，若无<code>return</code>则已最后一条指令执行结果为返回值。
在函数中使用特殊变量<code>$1-$9 $#</code>获取参数信息</p><h2 class="relative group">|| 条件与测试<div id=-%E6%9D%A1%E4%BB%B6%E4%B8%8E%E6%B5%8B%E8%AF%95 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-%E6%9D%A1%E4%BB%B6%E4%B8%8E%E6%B5%8B%E8%AF%95 aria-label=Anchor>#</a></span></h2><h3 class="relative group">条件结构<div id=%E6%9D%A1%E4%BB%B6%E7%BB%93%E6%9E%84 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%E6%9D%A1%E4%BB%B6%E7%BB%93%E6%9E%84 aria-label=Anchor>#</a></span></h3><p>UNIX中每条命令的执行都有返回值，UNIX通过对这个返回值测试提供了条件控制结构。</p><p>若返回值为0则为真此时执行<code>then</code>后的语句块，非0则为假则执行<code>else</code>的。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># 基础if-then结构</span>
</span></span><span class=line><span class=cl><span class=k>if</span> cmd
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>    commands
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># if-then-else结构</span>
</span></span><span class=line><span class=cl><span class=k>if</span> cmd
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>    true-commands
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    false-commands
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># if-then-elif结构</span>
</span></span><span class=line><span class=cl><span class=k>if</span> cmd
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>    true-commands
</span></span><span class=line><span class=cl><span class=k>elif</span> cmd
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>    commands
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    commands
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><h3 class="relative group">测试指令<div id=%E6%B5%8B%E8%AF%95%E6%8C%87%E4%BB%A4 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%E6%B5%8B%E8%AF%95%E6%8C%87%E4%BB%A4 aria-label=Anchor>#</a></span></h3><p>除一般sh命令外，shell还提供了专为条件测试使用的<code>test</code>内建命令，<code>test</code>根据参数进行比较后返回0或1。</p><blockquote><p>shell还提供了<code>true</code>，<code>false</code>的内建命令直接返回0和1</p></blockquote><p><code>test</code>提供了数值比较、字符串比较、文件测试</p><p><strong>数值比较</strong></p><table><thead><tr><th style=text-align:center>比较参数</th><th style=text-align:center>示例</th><th style=text-align:center>含义</th></tr></thead><tbody><tr><td style=text-align:center>-eq</td><td style=text-align:center>num1 -eq num2</td><td style=text-align:center>数值是否相等</td></tr><tr><td style=text-align:center>-ne</td><td style=text-align:center>num1 -ne num2</td><td style=text-align:center>是否不等</td></tr><tr><td style=text-align:center>-gt</td><td style=text-align:center>num1 -gt num2</td><td style=text-align:center>大于，greater than</td></tr><tr><td style=text-align:center>-ge</td><td style=text-align:center>num1 -ge num2</td><td style=text-align:center>大于等于</td></tr><tr><td style=text-align:center>-lt</td><td style=text-align:center>num1 -lt num2</td><td style=text-align:center>小于</td></tr><tr><td style=text-align:center>-le</td><td style=text-align:center>num1 -le num2</td><td style=text-align:center>小于等于</td></tr></tbody></table><blockquote><p>纯数值比较也可以使用<code>let "12&lt;13"</code>指令，此时是把比较表达式看作一个参数，<code>test</code>的则是表达式中所有元素均为参数（也就是均需要空格分隔）</p></blockquote><p><strong>字符比较</strong></p><table><thead><tr><th style=text-align:center>比较参数</th><th style=text-align:center>含义</th></tr></thead><tbody><tr><td style=text-align:center>=</td><td style=text-align:center>字符是否相等</td></tr><tr><td style=text-align:center>!=</td><td style=text-align:center>是否不等</td></tr><tr><td style=text-align:center>-n</td><td style=text-align:center>是否长度非0</td></tr><tr><td style=text-align:center>-z</td><td style=text-align:center>是否长度为0</td></tr></tbody></table><blockquote><p><code>test</code>使用方式是将操作数和比较符号均看作参数，所以<code>=</code>两边需要空格</p></blockquote><p><strong>文件测试</strong></p><table><thead><tr><th style=text-align:center>示列</th><th style=text-align:center>含义</th></tr></thead><tbody><tr><td style=text-align:center>-r filename</td><td style=text-align:center>文件是否存在并<strong>可读</strong></td></tr><tr><td style=text-align:center>-w filename</td><td style=text-align:center>文件是否存在并<strong>可写</strong></td></tr><tr><td style=text-align:center>-s filename</td><td style=text-align:center>文件是否存在并且大小非0</td></tr><tr><td style=text-align:center>-f filename</td><td style=text-align:center>文件是否存在且是普通文件</td></tr><tr><td style=text-align:center>-d filename</td><td style=text-align:center>文件是否存在且是目录</td></tr></tbody></table><p><code>test</code>指令还提供了<strong>逻辑参数</strong>，可以将多个比较表达式使用逻辑参数组合</p><table><thead><tr><th style=text-align:center>逻辑参数</th><th style=text-align:center>含义</th></tr></thead><tbody><tr><td style=text-align:center>-a</td><td style=text-align:center>与</td></tr><tr><td style=text-align:center>-o</td><td style=text-align:center>或</td></tr><tr><td style=text-align:center>!</td><td style=text-align:center>非</td></tr></tbody></table><p><code>[ contition ]</code>可<strong>简写</strong><code>test condition</code>，如下</p><blockquote><p>关于<code>[[ condition ]]</code>，<code>[[]]</code>是bash扩展的<code>[]</code>其功能类似，有以下区别
对于<code>[ -z "$b" ]</code> 可以直接使用 <code>[[ -z $b ]]</code>免去双引号
另外就是对于逻辑命令的引入<code>&&和||等</code>，<code>[[ cond1 && cond2]]</code>，但在其中不可使用<code>-a和-o等</code>。另外<code>&&和||等</code>可直接对任意命令的结果进行逻辑运算</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># 为了避免$val为空导致参数错误，一般需要使用引号将变量括起来</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nb>test</span> <span class=s2>&#34;</span><span class=nv>$val</span><span class=s2>&#34;</span> -eq <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> equal
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># []中前后必须要有空格</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$val</span><span class=s2>&#34;</span> -eq <span class=m>1</span> <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> equal
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><h2 class="relative group">|| 算数运算<div id=-%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97 aria-label=Anchor>#</a></span></h2><p>shell本身并不直接支持算符运算，而是通过命令方式提供，包括<code>expr</code>、<code>let</code></p><h3 class="relative group">expr<div id=expr class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#expr aria-label=Anchor>#</a></span></h3><p><code>expr</code>的使用方式类似<code>test</code>所有的元素均为参数需要空格隔开</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># expr只支持整数运算</span>
</span></span><span class=line><span class=cl>expr <span class=m>1</span> + <span class=m>1</span>
</span></span><span class=line><span class=cl>expr <span class=m>2</span> - <span class=m>1</span>
</span></span><span class=line><span class=cl>expr <span class=m>10</span> / <span class=m>2</span>
</span></span><span class=line><span class=cl>expr <span class=m>2</span> <span class=se>\*</span> <span class=m>3</span>
</span></span><span class=line><span class=cl>expr <span class=m>10</span> <span class=se>\%</span> <span class=m>3</span>
</span></span></code></pre></div><blockquote><p>注意<code>*</code>，<code>%</code>等元字符需要手动转义
在bash中<code>$((exp))</code>形式同样可进行算数运算</p></blockquote><h3 class="relative group">let<div id=let class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#let aria-label=Anchor>#</a></span></h3><p><code>let</code>则是将整个表达式作为参数，且可直接赋值。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># x为变量，此时无需使用$</span>
</span></span><span class=line><span class=cl><span class=nb>let</span> <span class=nv>x</span><span class=o>=</span>x+1  <span class=c1># let &#34;x=x+1&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>let</span> <span class=nv>x</span><span class=o>=</span>y*2
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># let也可用作比较， x、y可为变量也可为整数字面量</span>
</span></span><span class=line><span class=cl><span class=nb>let</span> <span class=s2>&#34;x&lt;y&#34;</span>
</span></span></code></pre></div><blockquote><p>对于let的参数最好用<code>""</code>包裹，避免元字符带来麻烦</p></blockquote><p><code>(( exp ))</code>是<code>let exp</code>的简写</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=o>((</span> <span class=nv>x</span><span class=o>=</span>x+1 <span class=o>))</span>
</span></span><span class=line><span class=cl><span class=o>((</span> <span class=s2>&#34;x=y*2&#34;</span> <span class=o>))</span>
</span></span></code></pre></div><blockquote><p>同样<code>(( ))</code>中前后均需要空格</p></blockquote><h2 class="relative group">|| 循环结构<div id=-%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9E%84 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9E%84 aria-label=Anchor>#</a></span></h2><h3 class="relative group">for-in-do-done<div id=for-in-do-done class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#for-in-do-done aria-label=Anchor>#</a></span></h3><p>for用于遍历序列</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=k>for</span> varname in list
</span></span><span class=line><span class=cl><span class=k>do</span>
</span></span><span class=line><span class=cl>    commands
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></div><blockquote><p>list是以空格为分隔的序列</p></blockquote><p><strong>break</strong>
在循环中可以使用<code>break</code>指令跳出循环，<code>break n</code>表示跳出n重循环。</p><h3 class="relative group">while-do-done<div id=while-do-done class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#while-do-done aria-label=Anchor>#</a></span></h3><p>while则是根据命令的执行结果决定是否执行循环，0则继续执行，非0则终止。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=k>while</span> cmd
</span></span><span class=line><span class=cl><span class=k>do</span>
</span></span><span class=line><span class=cl>    commands
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></div><blockquote><p>cmd可为任意命令，自然也可以使用<code>test</code>、<code>let</code>及其简写</p></blockquote><p><strong>循环重定向</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=k>while</span> <span class=nb>read</span> a b c
</span></span><span class=line><span class=cl><span class=k>do</span>
</span></span><span class=line><span class=cl>    cmds
</span></span><span class=line><span class=cl><span class=k>done</span> &lt; TMP
</span></span></code></pre></div><p>该重定向对于该循环（无论执行几次）只会打开一次文件，然后再循环中依次读取一行，知道文件尾，read返回非0结束。</p><h3 class="relative group">util-do-done<div id=util-do-done class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#util-do-done aria-label=Anchor>#</a></span></h3><p>基本结构同<code>while</code>，只是<code>util</code>条件与<code>while</code>相反，0则终止，非0继续执行</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>util cmd
</span></span><span class=line><span class=cl><span class=k>do</span>
</span></span><span class=line><span class=cl>    commands
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></div><h2 class="relative group">|| 多路分支结构case<div id=-%E5%A4%9A%E8%B7%AF%E5%88%86%E6%94%AF%E7%BB%93%E6%9E%84case class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-%E5%A4%9A%E8%B7%AF%E5%88%86%E6%94%AF%E7%BB%93%E6%9E%84case aria-label=Anchor>#</a></span></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=k>case</span> varname in
</span></span><span class=line><span class=cl>    pattern_1<span class=o>)</span>
</span></span><span class=line><span class=cl>        cmds
</span></span><span class=line><span class=cl>        last-cmd<span class=p>;;</span> <span class=c1># 最后一条指令必须用;;结束</span>
</span></span><span class=line><span class=cl>    pattern_2<span class=o>)</span>
</span></span><span class=line><span class=cl>        cmd<span class=p>;;</span>
</span></span><span class=line><span class=cl>    *<span class=o>)</span>             <span class=c1># 默认分支，必须在最后</span>
</span></span><span class=line><span class=cl>        cmd<span class=p>;;</span>
</span></span><span class=line><span class=cl><span class=k>esac</span>
</span></span></code></pre></div><p>这里的pattern和前面介绍的文件名替换类似，还可使用<code>|</code>做逻辑组合</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=k>case</span> <span class=nv>$hour</span> in
</span></span><span class=line><span class=cl>    0?<span class=p>|</span>1<span class=o>[</span>01<span class=o>])</span> <span class=nb>echo</span> <span class=s2>&#34;Good Morning&#34;</span><span class=p>;;</span>
</span></span><span class=line><span class=cl>    1<span class=o>[</span>2-7<span class=o>])</span> <span class=nb>echo</span> <span class=s2>&#34;Good Afternoon&#34;</span><span class=p>;;</span>
</span></span><span class=line><span class=cl>    *<span class=o>)</span> <span class=nb>echo</span> <span class=s2>&#34;Good Evening&#34;</span><span class=p>;;</span>
</span></span><span class=line><span class=cl><span class=k>esac</span>
</span></span></code></pre></div><h2 class="relative group">|| 捕获内核信号<div id=-%E6%8D%95%E8%8E%B7%E5%86%85%E6%A0%B8%E4%BF%A1%E5%8F%B7 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-%E6%8D%95%E8%8E%B7%E5%86%85%E6%A0%B8%E4%BF%A1%E5%8F%B7 aria-label=Anchor>#</a></span></h2><p><strong>内核信号</strong></p><table><thead><tr><th style=text-align:center>编号</th><th style=text-align:center>名称</th><th style=text-align:center>含义</th></tr></thead><tbody><tr><td style=text-align:center>1</td><td style=text-align:center>SIGHUP/挂起</td><td style=text-align:center>终端断开时发送给该用户的所有进程</td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>SIGINT/中断</td><td style=text-align:center>按下中断建，如Ctrl+D、Ctrl+C</td></tr><tr><td style=text-align:center>3</td><td style=text-align:center>SIGQUIT/退出</td><td style=text-align:center>按下退出键，如Ctrl+]，退出时会进行核心转储</td></tr><tr><td style=text-align:center>9</td><td style=text-align:center>SIGKILL/杀死</td><td style=text-align:center>kill -9发出</td></tr><tr><td style=text-align:center>15</td><td style=text-align:center>SIGTERM/终止</td><td style=text-align:center>kill -15发出</td></tr><tr><td style=text-align:center>shell使用<code>trap</code>指令捕获信号，设置对于该信号的处理方式。</td><td></td><td></td></tr></tbody></table><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># 覆盖15信号的默认处理，转而执行echo</span>
</span></span><span class=line><span class=cl><span class=nb>trap</span> <span class=s2>&#34;echo I refuse to die&#34;</span> <span class=m>15</span>
</span></span><span class=line><span class=cl><span class=c1># 忽略2 3信号</span>
</span></span><span class=line><span class=cl><span class=nb>trap</span> <span class=s2>&#34;&#34;</span> <span class=m>2</span> <span class=m>3</span>
</span></span><span class=line><span class=cl><span class=c1># 2 3信号复位默认处理方式</span>
</span></span><span class=line><span class=cl><span class=nb>trap</span> <span class=m>2</span> <span class=m>3</span>
</span></span></code></pre></div><h2 class="relative group">|| 调试shell程序<div id=-%E8%B0%83%E8%AF%95shell%E7%A8%8B%E5%BA%8F class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-%E8%B0%83%E8%AF%95shell%E7%A8%8B%E5%BA%8F aria-label=Anchor>#</a></span></h2><p>可以通过带选项的sh执行对脚本的调试</p><table><thead><tr><th style=text-align:center>选项</th><th style=text-align:left>功能</th></tr></thead><tbody><tr><td style=text-align:center>-n</td><td style=text-align:left>读取脚本但不执行，只进行语法检测</td></tr><tr><td style=text-align:center>-v</td><td style=text-align:left>每执行一条命令，都在stdout中显示原命令</td></tr><tr><td style=text-align:center>-x</td><td style=text-align:left>类似-v，但是显示的是变量替换完成后的命令</td></tr></tbody></table></div><details style=margin-left:0 class="mt-2 mb-5 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5"><summary class="py-1 text-lg font-semibold cursor-pointer bg-primary-200 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-primary-800 dark:text-neutral-100">unix-unbounded - This article is part of a series.</summary><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><a href=https://xxxgggyyy.github.io/posts/linux-basis/unix-introduction/>Part 1: UINIX简介与入门</a></div><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><a href=https://xxxgggyyy.github.io/posts/linux-basis/unix-file-system-intro/>Part 2: UNIX文件系统操作</a></div><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">Part 3: This Article</div></details><h2 class="mt-8 text-2xl font-extrabold mb-10">Related</h2><section class="w-full grid gap-4 sm:grid-cols-2 md:grid-cols-3"><a href=/posts/linux-basis/unix-introduction/ class=min-w-full><div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative"><div class="w-full thumbnail_card_related nozoom" style=background-image:url(/posts/linux-basis/unix-introduction/feature-unix_hub7351d5467fae0966b62631211843709_43149_600x0_resize_q75_box.jpg)></div><div class="px-6 py-4"><div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral" href=/posts/linux-basis/unix-introduction/>UINIX简介与入门</div><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime="2022-06-19 15:16:48 +0800 +0800">19 June 2022</time><span class="px-2 text-primary-500">&#183;</span><span>76 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">1 min</span></div><div class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/linux/","_self")'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Linux
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='window.open("/topics/linux-basis/","_self")'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Linux Basis</span></span></span></div></div><div class="py-1 prose dark:prose-invert">unix系统简介和入门知识</div></div><div class="px-6 pt-4 pb-2"></div></div></a><a href=/posts/linux-basis/unix-file-system-intro/ class=min-w-full><div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative"><div class="w-full thumbnail_card_related nozoom" style=background-image:url(/posts/linux-basis/unix-file-system-intro/feature-unix_hub7351d5467fae0966b62631211843709_43149_600x0_resize_q75_box.jpg)></div><div class="px-6 py-4"><div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral" href=/posts/linux-basis/unix-file-system-intro/>UNIX文件系统操作</div><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime="2022-06-19 15:16:48 +0800 +0800">19 June 2022</time><span class="px-2 text-primary-500">&#183;</span><span>492 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">3 mins</span></div><div class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/linux/","_self")'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Linux
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='window.open("/topics/linux-basis/","_self")'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Linux Basis</span></span></span></div></div><div class="py-1 prose dark:prose-invert">UNIX文件系统基本原理与简单使用</div></div><div class="px-6 pt-4 pb-2"></div></div></a></section></div><script>var oid="views_posts/linux-basis/shell-basis/index.md",oid_likes="likes_posts/linux-basis/shell-basis/index.md"</script><script type=text/javascript src=/js/page.min.5b1bad196a6075a1e11bae1dc95f24f67b610948a00525e347566c5a62338ea78f1c7224ab9a53873dcdb2a1a7d7d391b8a8ef45561297f68806c01315b0c4f6.js integrity="sha512-WxutGWpgdaHhG64dyV8k9nthCUigBSXjR1ZsWmIzjqePHHIkq5pThz3NsqGn19ORuKjvRVYSl/aIBsATFbDE9g=="></script></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group mr-3" href=/posts/c-family/cxx-perfect-forward-lr-ref/><span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Cxx完美转发与左右值引用再梳理</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2023-02-26 21:06:38 +0800 +0800">26 February 2023</time>
</span></span></a></span><span><a class="flex text-right group ml-3" href=/posts/linux-basis/unix-introduction/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">UINIX简介与入门</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2022-06-19 15:16:48 +0800 +0800">19 June 2022</time>
</span></span><span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&larr;</span></a></span></div></div></footer></article><div id=top-scroller class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex flex-col list-none sm:flex-row"><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/tags/ title>Tags</a></li></ul></nav><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2024
xxxgggyyy</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://blowfish.page/ target=_blank rel="noopener noreferrer">Blowfish</a></p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.62060bb247f4de2b6dde45903668fefb68d792f365587605177b1227c0cf43588701edaca0cb40e2c8e2789bd5ce67c1d2a215b9fb258c3496a7cd25e7cb5fdf.js integrity="sha512-YgYLskf03itt3kWQNmj++2jXkvNlWHYFF3sSJ8DPQ1iHAe2soMtA4sjieJvVzmfB0qIVufsljDSWp80l58tf3w=="></script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://xxxgggyyy.github.io/ style=z-index:500><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>