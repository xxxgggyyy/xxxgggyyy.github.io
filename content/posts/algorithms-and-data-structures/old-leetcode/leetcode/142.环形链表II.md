---
title: "142.环形链表II"
date: 2023-01-07T10:01:35+08:00
topics: "algorithms-and-data-structures"
draft: true
---

# 题目
给定一个链表的头节点  head ，返回链表开始入环的第一个节点。 如果链表无环，则返回 null。

如果链表中有某个节点，可以通过连续跟踪 next 指针再次到达，则链表中存在环。 为了表示给定链表中的环，评测系统内部使用整数 pos 来表示链表尾连接到链表中的位置（索引从 0 开始）。如果 pos 是 -1，则在该链表中没有环。注意：pos 不作为参数进行传递，仅仅是为了标识链表的实际情况。

不允许修改 链表

# 题解

采用快慢指针法，从头节点开始，慢指针`s`一次走一步，快指针`f`一次走两步。

首先，需要知道两指针一定会在环内相遇。核心性质在于，在环内一次移动，`f`和`s`的 *距离减少一* 。注意`f`无法跨越`s`，这是反直觉的，导致我第一次没想到。
>假设此时顺时针循环，`f`首先进入环内，然后当`s`走到环入口时，此时假设`f`顺时针距离`s`有`x`的距离，故一定会在`x`移动后相遇，而此时`s`还未走完一圈。

其次，`s`和`f`相遇时，意味着`f`比`s`多走了`nb`步，其中`b`为环的长度，`n`为可能的圈数。而`f`走过的距离是`s`的两倍即`2nb`，故`s`的走过的总距离为`f`的一半`nb`。

此时为了找到入口，`s`只需要再走`a`即可，`a`为头节点到环入口的长度。故此时，使用新的双指针即可，现在`f`指针用不上了直接复用，但一次只走一步了，`f`从头节点开始走，`s`从当前位置走，经过`a`步后一定都到了环入口相遇，得解。

